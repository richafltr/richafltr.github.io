(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{4223:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return jt}});var r=n(5893),o=n(4947),a=n(9477),i=n(6135),u=n(5228),l=n(7294),s=n(6506),c=n(9888),d=n(1033),f=n(1163),v=n.n(f),m=n(4837),x=n(6902),h=n(8597);var p=(0,x.ZP)((0,h.$e)({metadata:null,filteredData:[]},(function(e){return{setMetadata:function(t){return e((function(){return{metadata:t}}))},setFilteredData:function(t){return e((function(){return{filteredData:t}}))}}}))),y=n(967);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w,C,j,S,P,M={landId:null,kodaId:null,koda:!1,sediment:[],environment:[],artifact:[],category:[],resources:[],isUpdating:!1,sedimentScrollY:0,environmentScrollY:0,categoryScrollY:0,resourcesScrollY:0,artifactScrollY:0},A=(0,x.ZP)((0,h.$e)(M,(function(e){return{setLandId:function(t){return e((function(){return{landId:t}}))},setKodaId:function(t){return e((function(){return{kodaId:t}}))},addSediment:function(t){return e((function(e){return{sediment:b(e.sediment).concat([t])}}))},removeSediment:function(t){return e((function(e){var n=e.sediment;return n.splice(n.indexOf(t),1),{sediment:b(n)}}))},removeAllSediments:function(){return e((function(){return{sediment:[]}}))},addEnvironment:function(t){return e((function(e){return{environment:b(e.environment).concat([t])}}))},removeEnvironment:function(t){return e((function(e){var n=e.environment;return n.splice(n.indexOf(t),1),{environment:b(n)}}))},removeAllEnvironments:function(){return e((function(){return{environment:[]}}))},addArtifact:function(t){return e((function(e){return{artifact:b(e.artifact).concat([t])}}))},removeArtifact:function(t){return e((function(e){var n=e.artifact;return n.splice(n.indexOf(t),1),{artifact:b(n)}}))},removeAllArtifacts:function(){return e((function(){return{artifact:[]}}))},addCategory:function(t){return e((function(e){return{category:b(e.category).concat([t])}}))},removeCategory:function(t){return e((function(e){var n=e.category;return n.splice(n.indexOf(t),1),{category:b(n)}}))},removeAllCategories:function(){return e((function(){return{category:[]}}))},addResource:function(t){return e((function(e){return{resources:b(e.resources).concat([t])}}))},removeResource:function(t){return e((function(e){var n=e.resources;return n.splice(n.indexOf(t),1),{resources:b(n)}}))},removeAllResources:function(){return e((function(){return{resources:[]}}))},toggleKoda:function(){return e((function(e){return{koda:!e.koda}}))},clearFilters:function(){return e((function(){return{sediment:M.sediment,environment:M.environment,koda:M.koda,artifact:M.artifact,category:M.category,resources:M.resources}}))},clearSearchFields:function(){return e((function(){return{landId:M.landId,kodaId:M.kodaId}}))},setUpdating:function(t){return e((function(){return{isUpdating:t}}))},setEnvironmentScrollY:function(t){return e((function(){return{environmentScrollY:t}}))},setSedimentScrollY:function(t){return e((function(){return{sedimentScrollY:t}}))},setResourcesScrollY:function(t){return e((function(){return{resourcesScrollY:t}}))},setCategoryScrollY:function(t){return e((function(){return{categoryScrollY:t}}))},setArtifactScrollY:function(t){return e((function(){return{artifactScrollY:t}}))}}}))),k=(0,x.ZP)((function(e){return{enableTrail:!0,setEnableTrail:function(t){return e((function(){return{enableTrail:t}}))},startIntro:!1,setStartIntro:function(t){return e((function(){return{startIntro:t}}))}}})),N=n(6038),L=(0,x.ZP)((function(e,t){return{hoveredPointId:null,setHoveredPointId:function(t){return e((function(){return{hoveredPointId:t}}))},selectedPoint:null,setSelectedPoint:function(t){return e((function(){return{selectedPoint:t}}))},selectedPointPosition:function(){var e;return null===(e=t().selectedPoint)||void 0===e?void 0:e.position},isCamCtrlOn:!1,setCamCtrolOn:function(t){return e((function(){return{isCamCtrlOn:t}}))}}})),O={index:-1,position:{x:0,y:0,z:0}},E=function(){var e=(0,l.useRef)(null),t=L((function(e){return e.setSelectedPoint}));return(0,r.jsxs)("mesh",{ref:e,"rotation-x":-Math.PI/2,onClick:function(){t(O)},onPointerOver:function(){e.current&&N.ZP.to(e.current.scale,{x:1.2,y:1.2,z:1.2})},onPointerOut:function(){e.current&&N.ZP.to(e.current.scale,{x:1,y:1,z:1})},renderOrder:1,children:[(0,r.jsx)("circleBufferGeometry",{args:[.1,16]}),(0,r.jsx)("meshStandardMaterial",{color:"red",transparent:!0,depthWrite:!1,side:a.DoubleSide,depthTest:!1})]})},R=n(4153),T=n(374);w||(w={}),C||(C={}),j||(j={}),S||(S={}),P||(P={});var I=Array.from({length:7}).fill("#7d8dc7"),F=n(4059),U=n(1089),z=n(9137),D="\n  //\n  // Description : Array and textureless GLSL 2D/3D/4D simplex\n  //               noise functions.\n  //      Author : Ian McEwan, Ashima Arts.\n  //  Maintainer : ijm\n  //     Lastmod : 20110822 (ijm)\n  //     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n  //               Distributed under the MIT License. See LICENSE file.\n  //               https://github.com/ashima/webgl-noise\n  //\n  vec3 mod289(vec3 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n  }\n  \n  vec4 mod289(vec4 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n  }\n  \n  vec4 permute(vec4 x) {\n    return mod289(((x*34.0)+1.0)*x);\n  }\n  \n  vec4 taylorInvSqrt(vec4 r) {\n    return 1.79284291400159 - 0.85373472095314 * r;\n  }\n  \n  float snoise(vec3 v) {\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n  \n    // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n  \n    // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n  \n    //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n    //   x1 = x0 - i1  + 1.0 * C.xxx;\n    //   x2 = x0 - i2  + 2.0 * C.xxx;\n    //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n  \n    // Permutations\n    i = mod289(i);\n    vec4 p = permute( permute( permute(\n              i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n  \n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3  ns = n_ * D.wyz - D.xzx;\n  \n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n  \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n  \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n  \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n  \n    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n  \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n  \n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n  \n    //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n  \n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n  }\n",V=(0,z.g)({uProgress:0,uTime:0,uPulse:0,uBgColor:new a.Color("#080e17"),tLandMask:null,tAnimation:null,uIntensity:1,uMaskIntensity:1,uFrames:0,uFramesPerRow:0,uScale:0,uPulseCenter:new a.Vector2(0,0)},"\n    precision highp float;\n\n    uniform float uTime;\n    uniform float uPulse;\n    uniform sampler2D tAnimation;\n    uniform vec2 uPulseCenter;\n    \n    \n    varying vec4 vWorldPos;\n    varying vec2 vUv;\n    varying vec3 vColor;\n    varying float vMeetsFilter0;\n    varying float vMeetsFilter1;\n    varying float vPulse;\n    varying float vPulseBorder;\n\n    attribute vec3 color;\n    attribute float meetsFilter0;\n    attribute float meetsFilter1;\n    attribute vec2 animationUv;\n\n\n    attribute vec3 finalPosition;\n    uniform float uProgress;\n    uniform float uFrames;\n    uniform float uFramesPerRow;\n    uniform float uScale;\n\n\n    ".concat(D,"\n\n    const float pulseBlur = 15.;\n\n    vec2 getUVTile(float tile) {\n      float x = mod(tile, uFramesPerRow) / uFramesPerRow;\n      float y = 1.0-floor(tile/uFramesPerRow) / (uFrames / uFramesPerRow);\n\n      vec2 tileUnit = vec2(1. / uFramesPerRow, -1. / (uFrames / uFramesPerRow));\n\n      return vec2(x,y) + animationUv * tileUnit;\n    }\n\n    vec3 getPosition(vec2 tc) {\n      vec3 pos = texture2D(tAnimation, tc).rgb;\n      vec3 p = vec3(-1.0) + 2.0 * pos;\n\n      return p;\n    }\n\n    void main() {\n      vec4 worldPos = vec4(position, 1.);\n      if (uProgress == 1.) {\n        worldPos = modelMatrix * instanceMatrix * worldPos;\n\n      } else {\n        float frameNum = uProgress * (uFrames - 1.);\n  \n        // bounds for frame\n        float frameLow = floor(frameNum);\n        float frameHigh = ceil(frameNum);\n  \n        float u = mod(frameNum, uFramesPerRow);\n        float v = floor(frameNum / uFramesPerRow);\n        \n        vec3 p1 = getPosition(getUVTile(frameLow));\n        vec3 p2 = getPosition(getUVTile(frameHigh));\n  \n        vec3 p = mix(p1, p2, fract(frameNum));\n\n        worldPos.xyz += p * uScale;\n        worldPos = modelMatrix * worldPos;\n      }\n\n      vMeetsFilter0 = meetsFilter0;\n      vMeetsFilter1 = meetsFilter1;\n      vColor = color;\n      vUv = uv;\n\n\n\n      float pulseMinDistance = uScale - 2. * pulseBlur;\n\n\n      vPulse = 1. - smoothstep((uScale - pulseBlur) * uPulse, uScale * uPulse, length(worldPos.xz - uPulseCenter));\n      vPulseBorder = vPulse - (1. - smoothstep(pulseMinDistance * uPulse, (pulseMinDistance + pulseBlur) * uPulse, length(worldPos.xz - uPulseCenter)));\n    \n      \n      float n = snoise(vec3(worldPos.x, worldPos.z, uTime * .25) * 1.5);\n      worldPos.x += n * .8 * (1. - uProgress);\n      worldPos.y += n * 1.2 * mix(1., vPulseBorder, uProgress);\n      \n      vWorldPos = worldPos;\n\n      gl_Position = projectionMatrix * viewMatrix * vWorldPos;\n      \n    }\n  "),"\n    precision highp float;\n\n    uniform float uTime;\n    uniform float uPulse;\n    uniform float uProgress;\n    uniform sampler2D tLandMask;\n    uniform vec3 uBgColor;\n    uniform float uMaskIntensity;\n    uniform float uScale;\n    \n    varying vec3 vColor;\n    varying float vMeetsFilter0;\n    varying float vMeetsFilter1;\n    varying vec4 vWorldPos;\n    varying vec2 vUv;\n    varying float vPulse;\n    varying float vPulseBorder;\n\n    \n    ".concat(D,"\n\n    float circle(vec2 st, float _radius, float blurriness){\n      return 1.-smoothstep(_radius-(_radius*blurriness), _radius+(_radius*blurriness), length(st));\n    }\n      \n    void main() {\n\n      vec4 landMask = texture2D(tLandMask, vUv);\n      \n      \n\n      float meetsFilter = mix(vMeetsFilter0, vMeetsFilter1, vPulse);\n      vec4 outputColor = vec4( mix(uBgColor, vColor, meetsFilter), landMask.a);\n\n\n      // float colorFactor = (1. - length(vWorldPos.xz) / (uScale / 2.)) * (1. - uProgress);\n      // outputColor.rgb -= vec3(colorFactor * .1);\n\n      float factor = vPulseBorder + uMaskIntensity;\n      \n      gl_FragColor = vec4(factor * outputColor.rgb, outputColor.a);\n     \n\n    }\n  "));(0,u.e)({LandMaterial:V});var B=n(7854),_=function(e){var t,n=e.pointId,o=(0,l.useState)(!1),a=o[0],i=o[1],u=p((function(e){return e.metadata}));if((0,l.useEffect)((function(){var e=setTimeout((function(){i(!0)}),100);return function(){clearTimeout(e)}}),[]),null===n||-1===n||!u||!a||!u[n])return null;var s=null===(t=u[n])||void 0===t?void 0:t.position,c="#".concat(n);return(0,r.jsx)("group",{"position-x":s.x,"position-y":s.y+.3,"position-z":s.z-.3,children:(0,r.jsx)(B.V,{distanceFactor:4,zIndexRange:[0,9],children:(0,r.jsx)("div",{className:"absolute w-max -translate-x-1/2 translate-y-[calc((10vh-150px)*51/350-51px)] pointer-events-none select-none rounded-md border border-white/10 bg-black/50 px-8 pt-4 pb-4 text-center backdrop-blur-md",children:(0,r.jsx)("h2",{className:"text-3xl text-white opacity-90",children:c})})})})},H="#0e1b2a",Z="landId",W="kodaId",G="Escape",Y="ArrowRight",K="ArrowLeft",$=13,X={Oblivion:"Shard",Psychosilk:"Root",Galactica:"Anima",Dimensional:"Ore",Maltosia:"Anima",Mallo:"Ore",Durinia:"Anima",Lapidite:"Ore",Gloomia:"Anima",Phantom:"Ore",Kinsoul:"Shard",Lumileaf:"Root",Sporicite:"Anima",Stonecrop:"Ore",Senticybia:"Anima",Entradium:"Ore",Magentia:"Anima",Tanglevine:"Ore",Glowpod:"Anima",Spiritseep:"Ore",Luster:"Shard",Lunarian:"Root",Etheria:"Anima",Luminite:"Ore",Opalia:"Anima",Pyrum:"Ore",Fragmentia:"Anima",Aurelian:"Ore",Fortuna:"Anima",Tantalite:"Ore",Brimstone:"Shard",Nether:"Root",Slaglia:"Anima",Thermodite:"Ore",Sulfirica:"Anima",Chlorocite:"Ore",Abyssia:"Anima",Onyx:"Ore",Pricklia:"Anima",Ragnarock:"Ore",Moldium:"Shard",Petrified:"Root",Rotworth:"Anima",Bubonium:"Ore",Duskia:"Anima",Nocturna:"Ore",Scumbria:"Anima",Mossmoon:"Ore",Prysmatica:"Anima",Chroma:"Ore",Bonestone:"Shard",Spikeweed:"Root",Fossica:"Anima",Amberskull:"Ore",Steppesalt:"Anima",Claymer:"Ore",Obsilica:"Anima",Hollowcine:"Ore",Slushia:"Anima",Shatterfrost:"Ore",Runa:"Shard",Whisper:"Root",Nebula:"Anima",Vaporhaze:"Ore",Scholara:"Anima",Geopillar:"Ore",Coralia:"Anima",Brineslime:"Ore","Element 115":"Anima",Nucleod:"Ore",Omni:"Shard",Void:"Root",Degradia:"Anima",Entropy:"Ore"};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q,ee=1.8,te=(0,l.forwardRef)((function(e,t){var n=e.camSource,i=(0,l.useRef)(null),c=(0,l.useRef)(null),d=(0,l.useRef)([0,0]),f=(0,l.useRef)(null),v=(0,l.useRef)(),m=p(),x=m.metadata,h=m.setFilteredData,y=A((function(e){return e.setUpdating})),g=(0,l.useRef)(null),b=(0,R.H)((function(e){return e.zoomLevel})),w=J(L((function(e){return[e.hoveredPointId,e.selectedPoint,e.setHoveredPointId,e.setSelectedPoint,e.isCamCtrlOn,e.setCamCtrolOn]})),6),C=w[0],j=w[1],S=w[2],P=w[3],M=w[4],k=w[5],O=(0,u.z)(a.TextureLoader,"textures/land-mask-gradient.png"),E=(0,u.z)(o.I,"textures/first16frames.exr",(function(e){e.setDataType(a.FloatType)})),z=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new a.Matrix4,r=new a.Vector3,o=new a.Quaternion,u=new a.Vector3;if((null===i||void 0===i?void 0:i.current)&&void 0!==e){i.current.getMatrixAt(e,n),n.decompose(r,o,u);var l={value:0},s=N.p8.to(l,{value:1,ease:"power3.out",duration:.1,onUpdate:function(){var l=Number.parseFloat(s.progress().toFixed(2)),c=a.MathUtils.lerp(t?1:ee,t?ee:1,l);u.set(c,c,c),n.compose(r,o,u),i.current&&(i.current.setMatrixAt(e,n),i.current.instanceMatrix.needsUpdate=!0)}})}},D=(0,l.useRef)(),V=(0,l.useRef)(0),B=(0,l.useRef)({x:0,y:0});(0,u.x)((0,l.useCallback)((function(e,t){var r,o=e.raycaster,a=e.mouse,u=e.camera,l=e.clock;if(i.current&&b&&!(0,U.b)()&&!M)if(n&&n.distance<$){var s=1e3*l.elapsedTime;if(s-V.current>50&&(B.current.x!==a.x||B.current.y!==a.y)){V.current=s,B.current={x:a.x,y:a.y},o.setFromCamera(a,u);var d=o.intersectObject(i.current);if(d.length>0){var f=J(d,1)[0].instanceId;null!=f&&v.current!==f&&((null===j||void 0===j?void 0:j.index)!==f&&z(f),null!=v.current&&v.current!==(null===j||void 0===j?void 0:j.index)&&z(v.current,!1),v.current=f,S(f))}else null!=v.current&&(v.current!==(null===j||void 0===j?void 0:j.index)&&z(v.current,!1),v.current=null,S(null))}}else null!=v.current&&(z(v.current,!1),v.current=null,S(null));(null===(r=c.current)||void 0===r?void 0:r.uniforms)&&(c.current.uniforms.uTime.value+=t)}),[j,S,b,M,n])),(0,l.useEffect)((function(){E&&(E.minFilter=a.NearestFilter,E.magFilter=a.NearestFilter,E.generateMipmaps=!1)}),[E,x]),(0,l.useEffect)((function(){if(x){for(var e=new a.Object3D,t=0;t<x.length;t+=1){var n=x[t].position,r=n.x,o=n.y,u=n.z;e.position.set(r,o,u),e.updateMatrix(),i.current&&i.current.setMatrixAt(t,e.matrix)}i.current&&(i.current.instanceMatrix.needsUpdate=!0)}}),[x]),(0,l.useEffect)((function(){var e;(null===(e=c.current)||void 0===e?void 0:e.uniforms)&&i.current&&(c.current.uniforms.tLandMask.value=O,c.current.uniforms.tAnimation.value=E)}),[E,O]);var H=A((function(e){return{sediment:e.sediment,category:e.category,environment:e.environment,artifact:e.artifact,resources:e.resources,koda:e.koda}}),T.Z),Z=(0,l.useMemo)((function(){if(x){for(var e=new Float32Array(3*x.length),t=new a.Color,n=0;n<x.length;n+=1)t.set(x[n].color),t.toArray(e,3*n);return e}}),[x]);(0,s.M4)({landColor:{value:I[0],onChange:function(e){var t=new a.Color;if(i.current&&x&&Z){for(var n=0;n<x.length;n+=1)t.set(e).toArray(Z,3*n);i.current.geometry.attributes.color.needsUpdate=!0}}}});var W=(0,l.useRef)(null),Y=(0,l.useRef)(null),K=(0,l.useMemo)((function(){return x&&new Float32Array(x.length).fill(1)}),[x]),X=(0,l.useMemo)((function(){return x&&new Float32Array(x.length).fill(1)}),[x]),q=(0,l.useMemo)((function(){if(x){for(var e,t,n=new Float32Array(2*x.length),r=0;r<x.length;r+=1)e=r%400/400,t=Math.floor(r/400)/250,n[2*r]=e,n[2*r+1]=t;return n}return new Float32Array}),[x]);return(0,F.O)("keydown",(function(e){e.code===G&&P(null)})),(0,l.useEffect)((function(){var e;if(x&&X&&K){var t=Array.from({length:x.length},(function(e,t){return t}));h(t),W.current&&Y.current&&(Y.current.needsUpdate=!0,W.current.needsUpdate=!0),(null===(e=D.current)||void 0===e?void 0:e.isActive())||(D.current=N.p8.to(ue.uPulse,{value:1,duration:1.5,onStart:function(){y(!0)},ease:"power2.in",onComplete:function(){for(var e,t=0;t<x.length;t+=1)e=K[t],K[t]=X[t],X[t]=e;W.current&&Y.current&&(Y.current.needsUpdate=!0,W.current.needsUpdate=!0),ue.uPulse.value=0,y(!1)}}))}}),[x,K,X,y,H,h]),(0,l.useEffect)((function(){g.current&&z(g.current.index,!1),j&&(z(j.index,!0),k(!0),S(null),Q=window.setTimeout((function(){k(!1)}),1e3)),g.current=j||null}),[j,k,S]),(0,l.useEffect)((function(){var e,t,n,r,o,u;(null===(e=W.current)||void 0===e?void 0:e.setUsage)&&(null===(t=Y.current)||void 0===t?void 0:t.setUsage)&&(null===(r=W.current)||void 0===r||r.setUsage(a.DynamicDrawUsage),null===(o=Y.current)||void 0===o||o.setUsage(a.DynamicDrawUsage));(null===(n=f.current)||void 0===n||n.rotateX(a.MathUtils.degToRad(-90)),i.current)&&(null===(u=i.current)||void 0===u||u.instanceMatrix.setUsage(a.DynamicDrawUsage),i.current.material.uniforms.uProgress=ue.uProgress,i.current.material.uniforms.uPulse=ue.uPulse);return function(){window.clearTimeout(Q)}}),[]),(0,r.jsxs)(r.Fragment,{children:[x&&Z&&K&&X&&(0,r.jsxs)("instancedMesh",{renderOrder:1,ref:function(e){i.current=e,t&&(t.current=e)},args:[void 0,void 0,x.length],onClick:b?function(e){if(e.stopPropagation(),n&&n.distance<=$){var t=e.instanceId,r=e.nativeEvent,o=r.clientX,a=r.clientY;if(Math.sqrt(Math.pow(d.current[0]-o,2)+Math.pow(d.current[1]-a,2))>2)return void e.stopPropagation();if(void 0===t)return;if(x){z(t);var i=x[t];P(i)}}}:void 0,onPointerDown:b?function(e){d.current=[e.nativeEvent.clientX,e.nativeEvent.clientY]}:void 0,onPointerMissed:function(e){e.stopPropagation(),n&&n.distance<=$&&P(null)},children:[(0,r.jsxs)("planeBufferGeometry",{args:[.14,.14],ref:f,children:[(0,r.jsx)("instancedBufferAttribute",{attach:"attributes-color",args:[Z,3]}),(0,r.jsx)("instancedBufferAttribute",{attach:"attributes-meetsFilter0",args:[K,1],ref:W}),(0,r.jsx)("instancedBufferAttribute",{attach:"attributes-meetsFilter1",args:[X,1],ref:Y}),(0,r.jsx)("instancedBufferAttribute",{attach:"attributes-animationUv",args:[q,2]})]}),(0,r.jsx)("landMaterial",{ref:c,attach:"material",transparent:!0,depthWrite:!1,side:a.DoubleSide,depthTest:!1,"uniforms-uScale-value":le,"uniforms-uFramesPerRow-value":4,"uniforms-uFrames-value":16})]}),x&&null!=C&&C!==(null===j||void 0===j?void 0:j.index)&&(0,r.jsx)(_,{pointId:C}),j&&(0,r.jsx)(_,{pointId:j.index})]})}));te.displayName="LandItems";var ne=n(812),re=(0,z.g)({tMap:null,uOpacity:0,uCamDist:2.5,uScale:0},"\n  varying vec2 vUv;\n  varying vec4 vWorldPos;\n\n  void main() {\n    vUv = uv;\n    vWorldPos = modelMatrix * vec4(position, 1.);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }\n  ","\n  #define PI 3.14159265359\n\n  varying vec2 vUv;\n  varying vec4 vWorldPos;\n  uniform float uOpacity;\n  uniform sampler2D tMap;\n  uniform float uCamDist;\n  uniform float uScale;\n\n  const vec3 color = vec3(0.13,0.18,0.28);\n  \n  mat2 rotate(float a){\n    return mat2( cos(a), -sin(a), sin(a), cos(a));\n  }\n\n  float map(float value, float min1, float max1, float min2, float max2) {\n    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n  }\n\n  float circleOutline(float radius) {\n    float strokeWidth = map(uCamDist, 2.5, 40., 0.035, 0.095);\n    vec2 coord = vWorldPos.xz;\n    float inCircle = step(length(coord), radius);\n    float circleStroke = step(length(coord), radius + strokeWidth);\n    return circleStroke - inCircle;\n  }\n\n  float line(float rad) {\n    vec2 coord = vWorldPos.xz;\n    float width = map(uCamDist, 2.5, 40., 0.015, 0.05);\n    vec2 center = vec2(0., 0.);\n    coord = rotate(rad) * coord;\n    // bottom-left\n    vec2 bl = step(vec2(center.x - width, center.y - uScale * 0.55), coord);\n    float pct = bl.x * bl.y;\n    // top-right\n    vec2 tr = step(coord, vec2(center.x + width, center.y + uScale * 0.55));\n    pct *= tr.x * tr.y;\n    return pct;\n  }\n\n  float drawRadar() {\n    float r = uScale / 2.;\n    float circle1 = circleOutline(r * 1.04);\n    float circle2 = circleOutline(r * 5. / 6.);\n    float circle3 = circleOutline(r * 2. / 3.);\n    float circle4 = circleOutline(r / 2.);\n    float circle5 = circleOutline(r / 3.);\n    float circle6 = circleOutline(r / 6.);\n    float circles = circle1 + circle2 + circle3 + circle4 + circle5 + circle6;\n\n    float line1 = line(0.0);\n    float line2 = line(PI / 6.0);\n    float line3 = line(PI / 3.0);\n    float line4 = line(PI / 2.0);\n    float line5 = line(- PI / 3.0);\n    float line6 = line(- PI / 6.0);\n    float lines = min(1.0, line1 + line2 + line3 + line4 + line5 + line6);\n    \n    return min(1., circles + lines);\n  }\n\n\n  void main() {\n    vec2 uv = vUv;\n    // float mask = .5 * min(1., texture2D(tMap, uv).a + drawRadar());\n    float mask = .7 * drawRadar();\n\n    gl_FragColor = vec4(color, uOpacity * mask);\n  }\n  ");(0,u.e)({LandPlaneMaterial:re});var oe=function(e){var t=e.camSource,n=(0,l.useRef)(),o=(0,l.useRef)(null),i=(0,R.H)().zoomLevel;return(0,l.useEffect)((function(){var e;(null===(e=n.current)||void 0===e?void 0:e.uniforms)&&i>=1&&N.p8.to(n.current.uniforms.uOpacity,{value:1})}),[i]),(0,u.x)((function(e){var r=e.raycaster,a=e.camera,u=e.mouse;if(i>0&&n.current&&(null===t||void 0===t?void 0:t.distance)&&(n.current.uniforms.uCamDist.value=t.distance),!(0,U.b)()&&o.current){r.setFromCamera(u,a);var l=r.intersectObject(o.current);l.length>0&&ue.uMouse.value.copy(l[0].point)}})),(0,r.jsx)("object3D",{renderOrder:0,children:(0,r.jsxs)("mesh",{"rotation-x":-Math.PI/2,ref:o,children:[(0,r.jsx)("planeBufferGeometry",{args:[1.2*le,1.2*le]}),(0,r.jsx)("landPlaneMaterial",{ref:n,side:a.DoubleSide,transparent:!0,"uniforms-uScale-value":le})]})})};function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ue={uMouse:{value:new a.Vector3(0,0,0)},uProgress:{value:0},uPulse:{value:0},uVignette:{value:0},uTrailStrength:{value:.97}},le=138;function se(e){var t=e.camSource,n=(0,l.useRef)(null),o=(0,l.useRef)(null),i=(0,u.w)((function(e){return e.gl})),c=(0,l.useState)(!1),d=c[0],f=c[1],m=ie((0,R.H)((function(e){return[e.zoomLevel,e.setZoomLevel]})),2),x=m[0],h=m[1],p=(0,l.useRef)(null),y=k((function(e){return e.startIntro})),g=k((function(e){return e.setEnableTrail}));return(0,l.useEffect)((function(){var e=function(){p.current&&p.current.material.uniforms.uPulseCenter.value.set(ue.uMouse.value.x,ue.uMouse.value.z),N.p8.timeline({defaults:{ease:"power2.inOut"},onComplete:function(){p.current&&p.current.material.uniforms.uPulseCenter.value.set(0,0),ue.uPulse.value=0,g(!1),h(1),i.domElement.style.cursor="none"}}).to(ue.uTrailStrength,{value:0,duration:.5},0).to(ue.uPulse,{value:1,duration:.75},0)};return x<1&&(i.domElement.style.pointerEvents="none",i.domElement.style.cursor="default",i.domElement.addEventListener("click",e,{once:!0})),function(){return i.domElement.removeEventListener("click",e)}}),[i.domElement,g,h,x]),(0,s.M4)({progress:{value:ue.uProgress.value,max:1,min:0,onChange:function(e){ue.uProgress.value=e}},pulse:{value:ue.uPulse.value,max:1,min:0,onChange:function(e){ue.uPulse.value=e}}}),(0,u.x)((function(e,t){var r=e.mouse;if(null!==n.current&&(n.current&&x<1&&(n.current.rotation.y=(n.current.rotation.y+.1*t)%(2*Math.PI)),o.current)){var i=x>=1?0:1;o.current.rotation.y=a.MathUtils.damp(o.current.rotation.y,i*(-r.x*Math.PI)/6,.75,t),o.current.rotation.x=a.MathUtils.damp(o.current.rotation.x,i*(r.y*Math.PI)/10,.75,t)}})),(0,l.useEffect)((function(){n.current&&x>=1&&N.p8.to(n.current.rotation,{y:0,duration:4})}),[x]),(0,l.useEffect)((function(){var e=window.location.search,t=new URLSearchParams(e),r=/^\d{1,5}$/g.test(t.get("id")||"")?t.get("id"):null,a=r?Number.parseInt(r,10):-1;r&&a>=0&&a<=99999?(ue.uProgress.value=1,ue.uTrailStrength.value=1):y&&o.current&&p.current&&n.current&&(v().replace({query:null}).catch((function(e){console.error(e)})),ue.uProgress.value=0,ue.uTrailStrength.value=0,N.p8.timeline({defaults:{ease:"power2.inOut"},onComplete:function(){i.domElement.style.cursor="pointer",i.domElement.style.pointerEvents="auto"}}).to(ue.uProgress,{duration:5,value:1},.25).to(ue.uTrailStrength,{value:.97,duration:.5,ease:"power2.in"},3).fromTo(o.current.rotation,{z:-Math.PI/5},{z:0,duration:2},0).fromTo(o.current.rotation,{x:-Math.PI/1.4},{duration:5,x:0},0).fromTo(o.current.scale,{x:0,y:0,z:0},{x:2,y:2,z:2,duration:2.25,ease:"power2.in"},0).to(o.current.scale,{duration:3,x:1,y:1,z:1},2))}),[y]),(0,l.useEffect)((function(){var e=setTimeout((function(){f(!0)}),30);return function(){clearTimeout(e)}}),[]),(0,r.jsx)("group",{ref:o,children:(0,r.jsxs)("group",{ref:n,children:[(0,r.jsx)(E,{}),(0,r.jsx)(te,{ref:p,camSource:t}),(0,r.jsx)(oe,{camSource:t}),d&&(0,r.jsx)(ne.t,{count:2e3})]})})}var ce=n(9544),de=n(6073),fe=n(4458),ve=n(4803),me=n(5848),xe=n(718),he={uniforms:{tDiffuse:{value:null},uIntensity:{value:0}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\tprecision highp float;\n\t\tuniform sampler2D tDiffuse;\n    uniform float uIntensity;\n\t\tvarying vec2 vUv;\n\n    void main() {\n      vec4 outputColor = texture2D(tDiffuse, vUv);\n\n      vec2 vignetteUv = vUv * (1. - vUv.yx);\n      float v = vignetteUv.x * vignetteUv.y * 15.;\n      v = pow(v, uIntensity);\n\n\n\t\t\n\n      gl_FragColor = outputColor * v;\n\t\t}"},pe={uniforms:{tDiffuse:{value:null},tAdd:{value:null}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n    vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tAdd;\n    varying vec2 vUv;\n    void main() {\n      vec4 color = texture2D( tDiffuse, vUv );\n      vec4 add = texture2D( tAdd, vUv );\n      gl_FragColor = color + add;\n    }"},ye={uniforms:{tDiffuse:{value:null},lightPosition:{value:new a.Vector2(.39,.3)},exposure:{value:.51},decay:{value:.93},weight:{value:.33},samples:{value:65}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D tDiffuse;\n    uniform vec2 lightPosition;\n    uniform float exposure;\n    uniform float decay;\n    uniform float weight;\n    uniform int samples;\n    const int MAX_SAMPLES = 100;\n    \n    float map(float value, float min1, float max1, float min2, float max2) {\n      return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n    }\n    \n    void main()\n    {\n      vec2 texCoord = vUv;\n      // vec2 deltaTextCoord = texCoord - lightPosition;\n      vec2 deltaTextCoord = texCoord - vec2(texCoord.x, 0.05);\n      float density = map(texCoord.y, 0.1, 0.9, 0.7, 0.1);\n      deltaTextCoord *= 1.0 / float(samples) * density;\n      vec4 color = texture2D(tDiffuse, texCoord);\n      float illuminationDecay = 1.0;\n      for(int i=0; i < MAX_SAMPLES; i++) {\n        if(i == samples) break;\n        texCoord -= deltaTextCoord;\n        vec4 tex = texture2D(tDiffuse, texCoord);\n        tex *= illuminationDecay * weight;\n        color += tex;\n        illuminationDecay *= decay;\n      }\n      gl_FragColor = color * exposure;\n    }"};(0,u.e)({EffectComposer:ce.x,ShaderPass:de.T,RenderPass:fe.C,UnrealBloomPass:ve.m,AfterimagePass:me.m});var ge=new a.Vector2(.38,.3),be=new a.Vector2(.51,.65);function we(e){var t=e.camSource,n=L((function(e){return e.selectedPoint})),o=(0,u.w)((function(e){return e.scene})),i=(0,u.w)((function(e){return e.size})),c=(0,u.w)((function(e){return e.gl})),d=(0,u.w)((function(e){return e.camera})),f=(0,l.useMemo)((function(){return new a.WebGLRenderTarget(i.width,i.height,{format:a.RGBAFormat,stencilBuffer:!1})}),[i]),v=(0,l.useRef)(null),m=(0,l.useRef)(null),x=(0,l.useState)((function(){return new a.Vector2(1024,1024)}))[0],h=(0,l.useState)(!1),p=h[0],y=h[1],g=(0,l.useRef)(null),b=(0,l.useRef)(),w=(0,l.useRef)(null),C=(0,l.useRef)(null),j=(0,R.H)().zoomLevel,S=(0,xe.G)("md"),P=k((function(e){return e.enableTrail}));return(0,s.M4)({intensity:{max:1,min:0,value:ue.uVignette.value,onChange:function(e){ue.uVignette.value=e}},afterImage:{max:1,min:0,value:ue.uTrailStrength.value,onChange:function(e){ue.uTrailStrength.value=e}}}),(0,l.useEffect)((function(){null!=m.current&&null!=v.current&&(m.current.setSize(i.width,i.height),v.current.setSize(i.width,i.height))}),[i]),(0,u.x)((function(){var e,n;(null===(e=m.current)||void 0===e?void 0:e.render)&&(null===(n=v.current)||void 0===n?void 0:n.render)&&(c.setClearColor("black"),c.clear(),d.layers.set(1),v.current.render(),c.setClearColor(H),c.clear(),d.layers.set(0),m.current.render()),j>0&&C.current&&(null===t||void 0===t?void 0:t.distance)&&(C.current.strength=a.MathUtils.mapLinear(t.distance,3,52,.65-(P?.2:0),1.05-(P?.2:0)))}),1),(0,l.useEffect)((function(){var e=setTimeout((function(){y(!0)}),300);return g.current&&(g.current.material.uniforms.uIntensity=ue.uVignette),ue.uTrailStrength.value=0,w.current&&(w.current.shaderMaterial.uniforms.damp=ue.uTrailStrength),function(){clearTimeout(e)}}),[]),(0,l.useEffect)((function(){n||f.dispose();var e=S?.4:.3;n?(clearTimeout(b.current),N.p8.to(ue.uVignette,{value:e,duration:1.2})):b.current=window.setTimeout((function(){N.p8.to(ue.uVignette,{value:.1,duration:1.2})}),500)}),[n,c,f,S]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("effectComposer",{ref:v,args:[c,f],renderToScreen:!1,children:[(0,r.jsx)("renderPass",{attach:"passes-0",args:[o,d]}),(0,r.jsx)("shaderPass",{enabled:p&&!!n,attach:"passes-1",args:[ye],needsSwap:!1,"uniforms-lightPosition-value":S?ge:be})]}),(0,r.jsxs)("effectComposer",{ref:m,args:[c],children:[(0,r.jsx)("renderPass",{attach:"passes-0",scene:o,camera:d}),f&&(0,r.jsx)("shaderPass",{attach:"passes-1",clear:!0,args:[pe],"uniforms-tAdd-value":f.texture}),(0,r.jsx)("unrealBloomPass",{ref:C,attach:"passes-2",args:[x,1.8,.2,.03]}),(0,r.jsx)("afterimagePass",{enabled:P,ref:w,attach:"passes-3",args:[.97]}),(0,r.jsx)("shaderPass",{ref:g,attach:"passes-4",args:[he]})]})]})}var Ce=new a.Color("#030508");function je(){var e=(0,l.useRef)(null),t=(0,l.useRef)(null),n=L((function(e){return e.selectedPoint})),o=L((function(e){return e.selectedPointPosition()})),i=(0,u.w)((function(e){return e.gl}));return(0,l.useEffect)((function(){if(null!=(null===o||void 0===o?void 0:o.x)){var r;i.setClearColor(Ce);var u={h:0,s:0,l:0};new a.Color(null===n||void 0===n?void 0:n.color).getHSL(u),t.current&&t.current.color.setHSL(u.h,u.s,u.l),null===(r=e.current)||void 0===r||r.position.set(o.x,o.y,o.z)}else i.setClearColor(new a.Color(H))}),[o,n,i]),(0,r.jsxs)("mesh",{layers:1,ref:e,visible:!!n,children:[(0,r.jsx)("cylinderGeometry",{args:[.095,.095,.02,30]}),(0,r.jsx)("meshBasicMaterial",{ref:t,transparent:!0})]})}var Se,Pe=n(2469),Me=n(4091),Ae=(0,l.forwardRef)((function(e,t){var n=e.children,o=e.onClick,a=e.className,i=void 0===a?"":a;return(0,r.jsx)("button",{ref:t,className:(0,Me.classNames)("border border-gray-border w-[30px] h-[30px] md:w-[36px] md:h-[36px] flex justify-center items-center rounded-full bg-black hover:bg-white hover:text-black focus-visible:bg-white focus-visible:text-black",i),onClick:o,children:n})}));function ke(){var e=L((function(e){return e.selectedPoint})),t=L((function(e){return e.setSelectedPoint})),n=p(),o=n.metadata,a=n.filteredData,i=(0,l.useRef)(null),u=(0,l.useRef)(null),s=(0,l.useCallback)((function(n){if(e&&o){var r=a.indexOf(e.index);if(r<0)t(o[a[0]]);else{var i=r+(n===Se.prev?-1:1);i=i<0?a.length-1:i>=a.length?0:i,(0,m.isUndefined)(a[i])||t(o[a[i]])}}}),[a,o,e,t]);return(0,F.O)("keydown",(function(t){var n,r=t.code;if(e)if(r===Y)null===(n=u.current)||void 0===n||n.focus(),s(Se.next);else if(r===K){var o;null===(o=i.current)||void 0===o||o.focus(),s(Se.prev)}})),(0,F.O)("keyup",(function(t){var n,r=t.code;if(e)if(r===Y)null===(n=u.current)||void 0===n||n.blur();else if(r===K){var o;null===(o=i.current)||void 0===o||o.blur()}})),(0,r.jsxs)("div",{className:(0,Me.classNames)("absolute top-[50%] w-full flex -translate-y-2/4 z-30 justify-between duration-500 pointer-events-none",e?"opacity-100":"opacity-0"),children:[(0,r.jsx)(Ae,{className:"ml-[16px] md:-ml-[20px] pointer-events-auto",onClick:function(){return s(Se.prev)},ref:i,children:(0,r.jsx)(Pe.wyc,{className:"w-5 h-5"})}),(0,r.jsx)(Ae,{className:"mr-[16px] md:-mr-[20px] pointer-events-auto",onClick:function(){return s(Se.next)},ref:u,children:(0,r.jsx)(Pe.XCv,{className:"w-5 h-5"})})]})}Ae.displayName="CarouselButton",function(e){e[e.prev=0]="prev",e[e.next=1]="next"}(Se||(Se={}));var Ne=n(4051),Le=n.n(Ne),Oe=n(2100),Ee=n(4225),Re=n(1899),Te=n(8442);function Ie(){return(0,r.jsx)("svg",{width:"25",height:"27",viewBox:"0 0 25 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M2.87594 12.597C6.20912 7.61619 10.4703 7.28456 13.3538 8.5059C16.2372 9.72725 18.8163 12.6803 17.4056 17.6145C15.9942 21.1373 9.54076 21.1711 8.55163 20.8041C7.5708 20.4402 4.67132 17.0196 4.99643 13.5239C5.00175 13.4668 5.02975 13.4129 5.07251 13.3746C7.71367 11.0119 9.62851 10.9916 12.2996 11.9025C14.686 13.0267 15.003 16.0586 15.0447 16.7635C15.05 16.8544 14.9978 16.9371 14.9149 16.9747C10.9514 18.7704 6.20911 16.4362 6.20911 12.7224M2.87594 12.597C2.00175 17.7495 5.80823 23.2055 7.61462 23.7322C9.42102 24.2589 17.6059 24.2144 20.1471 19.3986C22.6883 14.5828 17.8854 3.8146 15.0511 2.88394C12.2167 1.95328 6.04624 6.61946 2.87594 12.597Z",stroke:"#EBD06D"})})}var Fe=function(e){var t=e.resource;switch(X[t]){case"Anima":return(0,r.jsxs)("svg",{width:"23",height:"28",viewBox:"0 0 23 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M12.7259 25.2951C11.3116 25.6135 7.36066 24.8926 5.38337 23.632C-4.37878 17.4082 8.14395 6.37118 14.0997 3.12483C14.199 3.07075 14.3147 3.09929 14.3779 3.19302C18.0006 8.57158 22.5887 23.0751 12.7259 25.2951Z",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M10.6451 25.1504C8.72325 25.7717 5.54361 23.1497 4.28886 22.5858C1.22147 21.2073 12.5935 20.925 14.6492 12.2395C14.6966 12.0395 14.9637 11.9904 15.0569 12.1735C17.4053 16.786 15.382 23.6193 10.6451 25.1504Z",stroke:"#4F68EA"})]});case"Root":return(0,r.jsxs)("svg",{width:"29",height:"21",viewBox:"0 0 29 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M3.54166 10.3502C3.54166 10.3502 6.07507 11.3618 9.73446 10.3502M9.73446 10.3502L13.9473 3.41067V0.998489C13.9473 0.998489 9.35816 0.998476 5.43769 2.96112C2.76454 4.29933 0.448242 7.14461 0.448242 7.14461M9.73446 10.3502C9.73446 10.3502 8.33141 14.0425 6.07508 15.0915",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M24.5863 10.3502C24.5863 10.3502 22.0529 11.3618 18.3935 10.3502M18.3935 10.3502L14.1807 3.41067V0.998489C14.1807 0.998489 18.7698 0.998476 22.6902 2.96112C25.3634 4.29933 27.6797 7.14461 27.6797 7.14461M18.3935 10.3502C18.3935 10.3502 19.7965 14.0425 22.0529 15.0915",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M14.061 2.01621C14.061 2.01621 14.061 9.9655 14.061 17.5032M14.061 17.5032C11.9631 17.5032 10.9141 20.5803 10.9141 20.5803M14.061 17.5032C16.159 17.5032 17.208 20.5803 17.208 20.5803",stroke:"#4F68EA"})]});case"Shard":return(0,r.jsxs)("svg",{width:"22",height:"28",viewBox:"0 0 22 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_2337_20807)",children:[(0,r.jsx)("path",{d:"M15.6875 2.34486L2.1089 14.0012C1.99204 14.1015 1.99064 14.2819 2.10592 14.384L6.47864 18.2574C6.5252 18.2987 6.555 18.3556 6.5624 18.4173L7.34337 24.9302C7.36819 25.1371 7.61797 25.2277 7.76969 25.0848L12.5145 20.6152C12.5593 20.573 12.618 20.5485 12.6796 20.5463L18.2517 20.3482C18.4019 20.3429 18.5146 20.209 18.4944 20.0601L16.1046 2.50331C16.0775 2.3039 15.8402 2.21377 15.6875 2.34486Z",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M1.93284 14.3686L11.3059 14.9374L16.007 2.20863",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M18.7961 20.5979L11.3036 14.9376L16.0047 2.20886",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M11.1641 15.1073L7.38574 25.3374",stroke:"#4F68EA"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_2337_20807",children:(0,r.jsx)("rect",{width:"20.6809",height:"27",fill:"white",transform:"translate(0.410156 0.0675049)"})})})]});case"Ore":return(0,r.jsxs)("svg",{width:"26",height:"28",viewBox:"0 0 26 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M12.9741 25.7856L4.45011 17.8343C4.41256 17.7993 4.3882 17.7524 4.38112 17.7016L3.53361 11.619C3.52511 11.5579 3.54215 11.4961 3.58072 11.448L9.21072 4.43306C9.24173 4.39442 9.28469 4.36716 9.33285 4.35557L16.1918 2.70382C16.269 2.68523 16.3503 2.70896 16.4054 2.76618L22.4102 9.00342C22.4535 9.04838 22.476 9.10938 22.4724 9.17169L21.8372 20.0244C21.8331 20.0948 21.796 20.1591 21.7372 20.198L13.2501 25.8087C13.1639 25.8657 13.0497 25.8562 12.9741 25.7856Z",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M4.52975 17.7012L16.4251 2.70284",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M9.14844 4.34451L11.4061 8.88774L14.4109 15.6598C14.4294 15.7015 14.4602 15.7365 14.4991 15.7602L21.9077 20.2733",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M22.4785 9.07397L18.489 11.1056C18.4661 11.1173 18.4455 11.1327 18.4279 11.1514L14.1405 15.6901C14.1068 15.7257 14.0858 15.7714 14.0806 15.8201L13.0243 25.7689",stroke:"#4F68EA"}),(0,r.jsx)("path",{d:"M18.72 11.4262L16.2871 2.78188",stroke:"#4F68EA"})]});default:return(0,r.jsx)("div",{})}};function Ue(e){var t=e.resource;return(0,r.jsx)("div",{className:"h-6 w-6 flex justify-center items-center",children:(0,r.jsx)(Fe,{resource:t})})}function ze(){return(0,r.jsx)("svg",{width:"29",height:"27",viewBox:"0 0 29 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9395 0.343792C14.7036 0.214234 14.4172 0.216817 14.1836 0.350609L1.22104 7.77458L1.23493 7.79884C1.22927 7.80132 1.22628 7.80269 1.22628 7.80269C1.072 7.94051 0.970703 8.14123 0.970703 8.37735V13.0037C0.970703 13.2795 1.11776 13.5345 1.35656 13.6726L13.9051 20.931L14.4706 21.2086C14.4709 21.2091 14.471 21.2094 14.471 21.2094L15.2245 20.9307L27.773 13.6723C28.0118 13.5341 28.1589 13.2792 28.1589 13.0033V7.60147L14.9395 0.343792ZM14.5645 15.1038L26.6516 7.91473L14.57 1.28169L2.72813 8.06382L14.5645 15.1038ZM15.0648 15.9697L27.1589 8.7765V12.8723L15.0648 19.8679V15.9697ZM14.0648 15.97L1.9707 8.77684V12.8726L14.0648 19.8682V15.97Z",fill:"#EE4444"})})}function De(e){var t=e.className,n=void 0===t?"w-6 h-6":t;return(0,r.jsx)("svg",{viewBox:"0 0 25 25",className:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12.3145 0.130859C5.60824 0.130859 0.169922 5.56918 0.169922 12.2754C0.169922 18.9816 5.60824 24.4199 12.3145 24.4199C19.0207 24.4199 24.459 18.9816 24.459 12.2754C24.459 5.56918 19.0231 0.130859 12.3145 0.130859ZM6.16203 12.6834L6.21304 12.6009L9.37305 7.65804C9.4192 7.5876 9.5285 7.59489 9.5625 7.67261C10.0896 8.85549 10.5462 10.3274 10.3325 11.2431C10.2426 11.6196 9.99242 12.1297 9.71067 12.6009C9.67423 12.6689 9.63537 12.7369 9.59165 12.8025C9.57222 12.8316 9.53821 12.8486 9.50178 12.8486H6.25433C6.16689 12.8486 6.11588 12.7539 6.16203 12.6834ZM20.2424 14.3837C20.2424 14.4298 20.2157 14.4687 20.1768 14.4857C19.9315 14.5901 19.0935 14.9763 18.7462 15.4597C17.8572 16.696 17.1796 18.4642 15.6615 18.4642H9.33176C7.08745 18.4642 5.27063 16.6401 5.27063 14.3885V14.3157C5.27063 14.2574 5.3192 14.2088 5.37993 14.2088H8.9067C8.97714 14.2088 9.02814 14.272 9.02329 14.3424C8.99657 14.5707 9.04029 14.8063 9.14959 15.0201C9.35847 15.4451 9.79325 15.7099 10.262 15.7099H12.0084V14.3472H10.2815C10.194 14.3472 10.1406 14.2452 10.1916 14.1724C10.211 14.1432 10.2305 14.1141 10.2547 14.0801C10.4175 13.8469 10.6507 13.4874 10.8838 13.0769C11.0417 12.8 11.1947 12.5037 11.3186 12.2074C11.3429 12.1539 11.3623 12.0981 11.3842 12.0446C11.4182 11.9499 11.4522 11.86 11.4765 11.7726C11.5008 11.6973 11.5226 11.6196 11.5421 11.5467C11.6004 11.2941 11.6246 11.0269 11.6246 10.75C11.6246 10.6407 11.6198 10.5266 11.6101 10.4197C11.6052 10.3007 11.5906 10.1817 11.5761 10.0627C11.5663 9.95821 11.5469 9.85377 11.5275 9.7469C11.5008 9.58902 11.4668 9.43114 11.4279 9.27326L11.4133 9.21254C11.3842 9.10324 11.3575 9.00123 11.3235 8.89192C11.2239 8.55188 11.1121 8.21912 10.9907 7.90822C10.947 7.78434 10.8984 7.66533 10.8474 7.54874C10.7745 7.369 10.6992 7.20626 10.6312 7.05324C10.5948 6.9828 10.5656 6.91965 10.5365 6.85407C10.5025 6.78121 10.4685 6.70834 10.4321 6.6379C10.4078 6.58446 10.3786 6.53346 10.3592 6.48488L10.1454 6.0914C10.1163 6.03796 10.1649 5.97238 10.2232 5.98938L11.5591 6.35129H11.5639C11.5664 6.35129 11.5663 6.35129 11.5688 6.35129L11.7437 6.4023L11.938 6.45573L12.0084 6.47516V5.68334C12.0084 5.29957 12.3145 4.98867 12.6958 4.98867C12.8852 4.98867 13.0577 5.0664 13.1791 5.1927C13.303 5.319 13.3807 5.49146 13.3807 5.68334V6.86136L13.524 6.90022C13.5338 6.90508 13.5459 6.90994 13.5556 6.91722C13.5896 6.94151 13.6406 6.98037 13.7038 7.02895C13.7548 7.06782 13.8082 7.11639 13.8714 7.1674C14.0001 7.27184 14.1556 7.40543 14.3232 7.55845C14.3669 7.59732 14.4106 7.63618 14.4519 7.67747C14.6681 7.87907 14.911 8.11467 15.1441 8.377C15.2097 8.45229 15.2729 8.52516 15.3384 8.60531C15.4016 8.68547 15.472 8.76319 15.5303 8.84092C15.6105 8.94536 15.6931 9.05466 15.7684 9.16882C15.8024 9.22225 15.8437 9.27812 15.8752 9.33156C15.9724 9.47486 16.055 9.62302 16.1351 9.77119C16.1691 9.8392 16.2031 9.91449 16.2323 9.98736C16.3221 10.1865 16.3926 10.3881 16.4363 10.5922C16.4509 10.6359 16.4606 10.682 16.4655 10.7257V10.7355C16.48 10.7938 16.4849 10.8569 16.4897 10.9225C16.5092 11.1289 16.4995 11.3378 16.4557 11.5467C16.4363 11.6342 16.412 11.7167 16.3829 11.8066C16.3513 11.8916 16.3221 11.9791 16.2833 12.0641C16.208 12.2365 16.1205 12.4114 16.0161 12.5717C15.9821 12.6324 15.9408 12.6956 15.9019 12.7563C15.8582 12.8195 15.8121 12.8802 15.7732 12.9385C15.7174 13.0138 15.6591 13.0915 15.5983 13.1619C15.5449 13.2348 15.4915 13.3077 15.4307 13.3733C15.3482 13.4728 15.268 13.5651 15.183 13.655C15.1344 13.7133 15.081 13.774 15.0251 13.8275C14.9717 13.8882 14.9158 13.9416 14.8672 13.9902C14.7822 14.0752 14.7142 14.1384 14.6559 14.1942L14.5175 14.3181C14.498 14.3375 14.4713 14.3472 14.4446 14.3472H13.3807V15.7099H14.7191C15.0178 15.7099 15.302 15.6054 15.5328 15.4087C15.6105 15.3407 15.953 15.0443 16.3586 14.5974C16.3732 14.5804 16.3902 14.5707 16.4096 14.5658L20.104 13.4971C20.1744 13.4777 20.2424 13.5287 20.2424 13.6016V14.3837Z",fill:"white"})})}var Ve,Be=n(4),_e=n(6666);function He(e){var t=e.className,n=void 0===t?"":t;return(0,r.jsxs)("svg",{className:n,width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M7.85016 5.76663C6.84658 5.76663 4.81988 6.48709 4.81988 6.48709C4.57559 4.2595 5.30007 3.03466 6.17816 0.880981C4.32178 1.853 3.5602 2.58293 2.9787 4.46997L1.91256 3.55583C1.8516 4.51209 1.91256 5.76663 2.19363 6.7553L0.541016 5.94674C0.842833 7.41308 1.17143 8.11282 2.19363 9.11681L0.541361 12.6972L1.91256 12.611L1.07131 14.7499L2.53033 14.4122C2.53033 14.4122 3.50377 17.2892 7.85016 17.1369",stroke:"white",strokeWidth:"0.632425"}),(0,r.jsx)("path",{d:"M7.77875 5.76663C8.78233 5.76663 10.809 6.48709 10.809 6.48709C11.0533 4.2595 10.3288 3.03466 9.45074 0.880981C11.3071 1.853 12.0687 2.58293 12.6502 4.46997L13.7163 3.55583C13.7773 4.51209 13.7163 5.76663 13.4353 6.7553L15.0879 5.94674C14.7861 7.41308 14.4575 8.11282 13.4353 9.11681L15.0875 12.6972L13.7163 12.611L14.5576 14.7499L13.0986 14.4122C13.0986 14.4122 12.1251 17.2892 7.77875 17.1369",stroke:"white",strokeWidth:"0.632425"})]})}function Ze(e){var t=e.title,n=e.subTitle,o=e.className,a=e.subClass,i=e.isKoda,u=e.subInfo,l=e.subColor;return(0,r.jsxs)("header",{className:"text-center ".concat(o||""),children:[(0,r.jsx)("h3",{className:"font-cta text-[8px] text-gray uppercase mb-1 tracking-widest",children:t}),n?(0,r.jsxs)("h3",{className:"text-sm uppercase min-h-[24px] ".concat(a||""," ").concat(i?"flex items-center":""),children:[i&&(0,r.jsx)(He,{className:"mr-3 mb-0.5"}),n]}):(0,r.jsx)("h3",{className:"text-gray",children:"NONE"}),u&&(0,r.jsx)("h4",{className:"font-cta ".concat(l||"text-gold"," text-[8px] uppercase tracking-widest"),children:u})]})}function We(e){var t=e.className,n=e.children;return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center text-center bg-gray-10 p-5 rounded ".concat(t||""),children:n})}function Ge(e,t,n,r,o,a,i){try{var u=e[a](i),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,o)}function Ye(e){var t=e.selectedLandId;return t&&"-1"===t?(0,r.jsxs)("header",{children:[(0,r.jsx)("div",{className:"relative h-0 pb-[138%]",children:(0,r.jsx)(Ee.s,{className:"absolute rounded-md w-full h-full",src:"textures/Clubhouse.jpg",alt:"Land Image Bg",immediateRender:!0})}),(0,r.jsx)("div",{className:"text-center my-5",children:(0,r.jsx)("h2",{className:"font-headline text-[40px] leading-tight uppercase",children:"Bored Ape Yacht Club"})})]}):(0,r.jsx)(Ke,{selectedLandId:t})}!function(e){e[e.Northern=0]="Northern",e[e.Eastern=1]="Eastern",e[e.Southern=2]="Southern",e[e.Western=3]="Western"}(Ve||(Ve={}));function Ke(e){var t=e.selectedLandId,n=(0,l.useState)(null),o=n[0],a=n[1],i=(0,l.useState)(!1),u=i[0],s=i[1],c=(0,l.useState)(""),d=c[0],f=c[1];if((0,l.useEffect)((function(){if(t){var e=function(){var e,n=(e=Le().mark((function e(){var n;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Be.J)(t);case 2:(n=e.sent).error?(a(null),f(2===n.error?"An error occured while fetching data":"")):(a(n),f("")),s(!0);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ge(a,r,o,i,u,"next",e)}function u(e){Ge(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}return function(){a(null)}}),[t]),(null===o||void 0===o?void 0:o.imageURL)&&(null===o||void 0===o?void 0:o.metadata)){var v,m,x,h=o.metadata,p=h.sediment,g=h.environment,b=h.resources,w=h.artifact,C=h.koda,j=o.kodadata;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"pt-12",children:[(0,r.jsx)(_e.t,{imageURL:o.imageURL,environment:(null===o||void 0===o||null===(v=o.metadata)||void 0===v||null===(m=v.environment)||void 0===m?void 0:m.value)||"",obeliskPieces:null===o||void 0===o||null===(x=o.metadata)||void 0===x?void 0:x.obeliskPieces}),(0,r.jsxs)("div",{className:"text-center my-5",children:[(0,r.jsx)("h2",{className:"font-headline text-[54px] uppercase",children:g.value}),(0,r.jsx)("p",{className:"text-sm text-purple",children:"TIER ".concat(g.tier)})]})]}),(0,r.jsx)("div",{className:"border-x-0 border-y py-5 my-5 border-gray-border flex justify-center",children:(0,r.jsx)(Ze,{className:"w-2/5",title:"token id",subTitle:" #".concat(t||"")})}),(0,r.jsxs)("div",{className:"flex flex-col items-center mt-5 border-b border-b-gray-border pb-5",children:[(0,r.jsxs)("div",{className:"text-[28px] leading-[25.2px] font-headline flex items-center justify-center w-full",children:[(0,r.jsx)("span",{className:"text-[23px]",children:"$"}),"APE MARKETPLACES"]}),(0,r.jsxs)(Re.r,{href:"".concat(Te.xC,"/assets/").concat(Oe.OtherdeedContract.address,"/").concat(t||""),className:"button-secondary border-gray-dark flex justify-center items-center min-w-[0] text-[8px] md:text-[11px] px-4 py-2 w-auto my-5",children:[(0,r.jsx)("span",{className:"mr-3",children:"View on OpenSea"})," ",(0,r.jsx)(De,{className:"w-[18px] h-[18px]"})]}),(0,r.jsx)("div",{className:"footer-text",children:"OTHER MARKETPLACES"}),(0,r.jsx)(Re.r,{href:"".concat(Te.Mg,"/collections/").concat(Oe.OtherdeedContract.address,"/").concat(t||""),className:"cta-small underline underline-offset-2 tracking-[1px] flex justify-center items-center min-w-[0] mx-0 basis-3/6 mt-4 text-gray-legal",children:"LooksRare"})]}),(0,r.jsxs)("article",{children:[(0,r.jsx)("h2",{className:"font-headline text-3xl text-center text-gray-dark my-5 uppercase",children:"Otherdeed Properties"}),(0,r.jsxs)("div",{className:"flex my-3 justify-between",children:[(0,r.jsxs)(We,{className:"w-[48.3%] min-h-[131px]",children:[(0,r.jsx)(ze,{}),(0,r.jsx)(Ze,{className:"mt-3",subClass:"text-base",title:"Sediment",subTitle:p.value,subInfo:"TIER ".concat(p.tier)})]}),(0,r.jsxs)(We,{className:"w-[48.3%] min-h-[131px] space-y-3",children:[w&&(0,r.jsx)(Ie,{}),(0,r.jsx)(Ze,{subClass:"text-base",title:"Artifact",subTitle:w})]})]}),(0,r.jsx)("div",{className:"flex flex-wrap justify-between",children:b.map((function(e,t){return(0,r.jsxs)(We,{className:"w-[48.3%] min-h-[131px] mb-3 space-y-3",children:[(n=e.value,n in X&&(0,r.jsx)(Ue,{resource:e.value})),(0,r.jsx)(Ze,{subClass:"text-base",title:"".concat(Ve[t]," Resource"),subTitle:e.value,subInfo:e.value?"TIER ".concat(e.tier):null})]},"resource-".concat(t));var n}))})]}),C&&null!==j&&(0,r.jsxs)("article",{children:[(0,r.jsx)("h2",{className:"font-headline uppercase text-3xl text- text-center text-gray-dark mt-2 mb-5",children:"Koda Properties"}),(0,r.jsx)(We,{children:(0,r.jsx)(Ze,{isKoda:!0,subClass:"text-xl mb-2 mt-3",title:"Koda",subTitle:null==j?null:"#".concat(C),subColor:"text-red"})}),(0,r.jsx)("img",{src:j.image,alt:"Koda #".concat(C)}),j.attributes.map((function(e){return(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(We,{className:"pb-2.5 pt-4 px-0",children:(0,r.jsx)(Ze,{title:e.trait_type,subTitle:e.value})})},e.trait_type)}))]})]})}return(0,r.jsxs)("header",{children:[(0,r.jsx)(_e.t,{}),(0,r.jsx)(Ze,{title:"token id",subTitle:" #".concat(t||"")}),(0,r.jsx)("div",{className:"mt-3",children:u?d?(0,r.jsx)("p",{className:"font-cta text-sm text-center text-red",children:d}):(0,r.jsx)("p",{className:"font-cta text-sm text-center text-gray-light",children:"Specified token has not been minted"}):(0,r.jsx)(y.Z,{})})]})}function $e(e){var t=e.handleLocate,n=function(){var e;(null===(e=c.current)||void 0===e?void 0:e.isActive())&&c.current.kill()},o=(0,l.useState)(),a=o[0],i=o[1],u=(0,l.useRef)(null),s=(0,l.useRef)(null),c=(0,l.useRef)(),d=(0,xe.G)("md"),f=L((function(e){return e.selectedPoint})),v=L((function(e){return e.setSelectedPoint})),x=(0,l.useRef)(!1),h=(0,l.useCallback)((function(){var e=s.current;n(),c.current=N.p8.timeline({onComplete:function(){if(x.current=!0,f){var e=f.index;i(e.toString())}}}),x.current&&c.current.to(e,{duration:.5,opacity:0,ease:"power3.in",onComplete:function(){i(null)}}),c.current.to(e,{y:"0",opacity:1,ease:"power3.out"})}),[f]),p=(0,l.useCallback)((function(){var e=s.current;n(),c.current=N.p8.to(e,.5,{y:d?"10px":"100%",opacity:0,ease:"power3.in",onComplete:function(){x.current=!1,i(null)}})}),[d]);return(0,l.useEffect)((function(){(0,m.isNull)(f)?p():h()}),[f,p,h]),(0,r.jsxs)("div",{className:(0,Me.classNames)("absolute z-30 h-[50vh] top-auto bottom-0 w-full md:h-[calc(100%_+_theme(space.5))] md:right-0 md:top-0 md:bottom-auto md:w-[460px]",a?"pointer-events-all cursor-auto":"pointer-events-none"),children:[(0,r.jsx)(ke,{}),(0,r.jsx)("div",{className:"absolute w-full h-full overflow-y-auto scrollbar-hide md:py-5",ref:u,children:(0,r.jsxs)("div",{ref:s,className:"w-full px-[64px] py-5 relative border border-white/10 rounded-2xl cursor-auto text-white bg-black opacity-0 translate-y-full md:translate-y-[10px] min-h-full md:p-5",children:[a&&(0,r.jsx)(Ye,{selectedLandId:a}),(0,r.jsx)("button",{className:"absolute right-[22px] md:right-7 top-7 z-30",onClick:function(){v(null)},children:(0,r.jsx)(Pe.ypG,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"absolute left-[16px] md:left-7 top-6 z-30 border-gray-border border w-[30px] h-[30px] flex justify-center items-center rounded-full md:p-1 md:w-auto md:h-auto",onClick:function(){return t()},children:(0,r.jsx)(Pe.Rub,{opacity:.8})})]})})]})}var Xe=n(1827);function qe(e){var t=e.open,n=e.className,o=void 0===n?"":n,a=e.children,i=(0,Xe.i)(),u=i.windowW,s=i.windowH,c=(0,l.useState)(0),d=c[0],f=c[1],v=(0,l.useRef)(null),m=(0,l.useRef)(null),x=(0,xe.G)("md");return(0,l.useEffect)((function(){if(t){var e=N.p8.timeline({defaults:{duration:.5,ease:"power3.out",onComplete:function(){N.p8.set(v.current,{height:"auto"})}}});x&&e.to(v.current,{height:d}),e.to(m.current,{x:0},"-=.25")}else{var n=N.p8.timeline({defaults:{duration:.5,ease:"power3.out"}});n.to(m.current,{x:"-110%"}),n.to(v.current,{height:0},"-=.25")}}),[t,d,x]),(0,l.useEffect)((function(){var e;f(null===(e=m.current)||void 0===e?void 0:e.scrollHeight)}),[u,s]),(0,r.jsxs)("div",{ref:v,className:(0,Me.classNames)("absolute flex items-end h-screen md:h-0 md:relative"),children:[t&&!x&&(0,r.jsx)("div",{className:"fixed w-screen h-screen backdrop-blur-md top-0 left-0"}),(0,r.jsx)("div",{ref:m,className:"w-screen h-screen -translate-x-[110%] overflow-hidden md:rounded-md md:w-auto md:h-auto",children:(0,r.jsx)("div",{className:(0,Me.classNames)("w-full h-full overflow-y-auto px-5 absolute top-0 flex flex-col justify-center md:block md:relative md:h-auto md:border-gray-border box-border md:w-[255px] md:px-8 md:py-7 text-white  md:bg-black/50 md:backdrop-blur-md",o),children:(0,r.jsxs)("div",{className:"-mt-[90px] md:mt-0",children:[" ",a]})})})]})}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e){var t=e.placeholder,n=e.min,o=void 0===n?1:n,a=e.max,i=void 0===a?1e5:a,u=e.filterId,s=e.className,c=Qe(A((function(e){return[e.landId,e.kodaId,e.setLandId,e.setKodaId]})),4),d=c[0],f=c[1],v=c[2],m=c[3],x=(0,l.useState)(""),h=x[0],p=x[1];return(0,l.useEffect)((function(){u===Z&&p(d?null===d||void 0===d?void 0:d.toString():""),u===W&&p(f?null===f||void 0===f?void 0:f.toString():"")}),[d,f,u]),(0,r.jsx)("div",{className:"relative text-black ".concat(s||""),children:(0,r.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),h){var t=Number.parseInt(h,10);u===Z&&v(t),u===W&&m(t)}},children:(0,r.jsxs)("fieldset",{children:[(0,r.jsx)("input",{className:"input-text input-field input-outlined-small w-full",type:"number",placeholder:t,min:o,max:i,onChange:function(e){p(e.target.value)},value:h}),(0,r.jsx)("button",{className:"color-white focus-visible:outline-gray-border-hover absolute right-[8px] w-[15px] top-0 h-full text-white",type:"submit",children:(0,r.jsx)(Pe._Ve,{className:"h-full w-full"})})]})})})}function tt(){var e=p().metadata;return(0,r.jsxs)("div",{children:[(0,r.jsx)("header",{className:"mb-2 flex justify-between",children:(0,r.jsx)("p",{className:"filter-panel-header",children:"Locate"})}),(0,r.jsx)(et,{className:"mb-0",placeholder:"Otherdeed number",min:0,max:e?e.length-1:99999,filterId:Z})]})}function nt(e){var t=e.onClick,n=e.open,o=e.icon,a=e.className,i=void 0===a?"":a;return(0,r.jsx)("button",{className:(0,Me.classNames)("open-filter mt-2 pointer-events-auto",i),onClick:t,children:n?(0,r.jsx)(Pe.ypG,{}):"search"===o?(0,r.jsx)(Pe._Ve,{}):(0,r.jsx)(Pe.hsZ,{})})}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(){var e=(0,l.useState)(!1),t=e[0],n=e[1],o=(0,l.useState)(!1),a=o[0],i=o[1],u=(0,xe.G)("md"),s=ot(A((function(e){return[e.landId,e.kodaId,e.clearSearchFields]})),3),c=s[0],d=s[1],f=s[2];return(0,l.useEffect)((function(){n(!1)}),[c,d]),(0,l.useEffect)((function(){t||f()}),[t,f]),(0,r.jsxs)("section",{className:(0,Me.classNames)("fixed top-0 left-0 w-screen h-full z-10 md:left-[10px] md:absolute md:bottom-[10px] md:top-[auto] md:h-auto md:w-auto cursor-default",a||t?"pointer-events-auto":"pointer-events-none md:pointer-events-auto "),children:[(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(qe,{open:t,children:(0,r.jsx)(tt,{})})}),(0,r.jsx)("div",{className:"absolute bottom-5 left-5 md:bottom-0 md:left-0",children:(0,r.jsx)(nt,{onClick:function(){var e=t;e||u||i(!1),n(!e)},open:t,icon:"search"})})]})}var it=n(105),ut=it.Z.ACTION,lt={MOUSE:a.MOUSE,Vector2:a.Vector2,Vector3:a.Vector3,Vector4:a.Vector4,Quaternion:a.Quaternion,Matrix4:a.Matrix4,Spherical:a.Spherical,Box3:a.Box3,Sphere:a.Sphere,Raycaster:a.Raycaster,MathUtils:{DEG2RAD:a.MathUtils.DEG2RAD,clamp:a.MathUtils.clamp}};it.Z.install({THREE:lt}),(0,u.e)({CameraControlsDefault:it.Z});var st=.52*le,ct=new a.Box3(new a.Vector3(-st,-1,2-st),new a.Vector3(st,1,st)),dt=function(e,t,n){if(e&&t){var r=n&&e.distance>6?6:e.distance,o=n?[a.MathUtils.mapLinear(r*a.MathUtils.mapLinear(window.innerHeight,600,1200,1.9,1),2.5,11.4,.7,3.1),.1,-.1]:[0,-.45,1.3];null===e||void 0===e||e.moveTo(t.x+o[0],t.y+o[1],t.z+o[2],!0),n?e.distance>6&&e.dollyTo(6,!0):e.dollyTo(3,!0)}},ft=(0,l.forwardRef)((function(e,t){var n=e.setCamSource,o=(0,l.useRef)(null),i=(0,u.w)((function(e){return e.camera})),s=(0,u.w)((function(e){return e.gl})),c=(0,R.H)((function(e){return e.zoomLevel})),d=L((function(e){return e.selectedPoint})),f=L((function(e){return e.selectedPointPosition()})),v=L((function(e){return e.setCamCtrolOn})),m=(0,xe.G)("md");(0,u.x)((function(e,t){if(o.current){var n=o.current,r=a.MathUtils.clamp(n.distance,2.5,52);n.polarAngle=a.MathUtils.mapLinear(r,2.5,52,Math.PI/3.9,Math.PI/5),n.update(t)}}));var x=(0,l.useCallback)((function(){var e=new a.Vector3,t=o.current;if(t){var n=t.getTarget(e),r=n.x,i=n.z;Math.pow(r+(r<0?i<0?4:8:i>0?-8:-4),2)/Math.pow(r<0?70:i>0?71:69,2)+Math.pow(i+(r<0?.5:0),2)/Math.pow(r<0||i<0?69:70,2)<=1||(t.truck(r<-42&&(i<-10||i>24)?1:r>36&&i<-12||r>39&&i>24?-1:0,0,!0),t.forward(i<-46&&r<-12||i<-43&&r>8?-1:i>46&&r<-24||i>43&&r>32?1:0,!0))}}),[m]),h=function(){v(!0)},p=function(){v(!1)};return(0,l.useEffect)((function(){var e=o.current;return n(e),null===e||void 0===e||e.setBoundary(ct),null===e||void 0===e||e.addEventListener("rest",x),null===e||void 0===e||e.addEventListener("controlstart",h),null===e||void 0===e||e.addEventListener("controlend",p),function(){null===e||void 0===e||e.dispose(),null===e||void 0===e||e.removeEventListener("rest",x),null===e||void 0===e||e.removeEventListener("controlstart",h),null===e||void 0===e||e.removeEventListener("controlend",p)}}),[]),(0,l.useEffect)((function(){var e=o.current;f&&dt(e,f,m)}),[f,m]),(0,l.useEffect)((function(){var e=o.current;0===c?(null===e||void 0===e||e.moveTo(0,0,8,!0),null===e||void 0===e||e.rotatePolarTo(Math.PI/5,!0)):d||(null===e||void 0===e||e.moveTo(1,0,2,!0),null===e||void 0===e||e.rotatePolarTo(Math.PI/4,!0),null===e||void 0===e||e.dollyTo(7,!0))}),[c]),(0,r.jsx)("cameraControlsDefault",{ref:vt(o,t),args:[i,s.domElement],truckSpeed:3,enabled:0!==c,mouseButtons:{left:ut.TRUCK,middle:ut.DOLLY,right:ut.NONE,wheel:ut.DOLLY,shiftLeft:ut.NONE},touches:{one:ut.TOUCH_TRUCK,two:ut.TOUCH_DOLLY_TRUCK,three:ut.NONE},minDistance:2.5,maxDistance:52,restThreshold:.1,verticalDragToForward:!0})}));function vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value;"function"===typeof u?u(e):u&&(u.current=e)}}catch(l){r=!0,o=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}}ft.displayName="CameraControls";var mt=(0,z.g)({tMap:null},"\n  varying vec2 vUv;\n\n  \n  void main()\t{\n    vUv = uv;\n    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }\n  ","\n  uniform sampler2D tMap;\n  varying vec2 vUv;\n\n\n  void main() {\n    gl_FragColor = texture2D(tMap, vUv);\n  }\n  ");function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,u.e)({CursorMaterial:mt});var ht={x:1,y:1,z:1},pt={x:1.5,y:1.5,z:1.5};function yt(e){var t=e.camSource,n=(0,l.useRef)(null),o=L((function(e){return e.hoveredPointId})),i=(0,u.z)(a.TextureLoader,"textures/cursor.png"),s=(0,u.z)(a.TextureLoader,"textures/cursor-far.png"),c=(0,l.useState)(!1),d=c[0],f=c[1];return(0,l.useEffect)((function(){if(n.current){var e=d?pt:ht;N.p8.timeline().fromTo(n.current.scale,d?ht:pt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xt(e,t,n[t])}))}return e}({},e,{duration:.1,ease:"power2.inOut"}),0)}}),[d]),(0,l.useEffect)((function(){var e=N.p8.to({value:0},{value:1,ease:"power3.out",duration:.1,onUpdate:function(){var t;if((null===(t=n.current)||void 0===t?void 0:t.scale.x)&&!d){var r,i=Number.parseFloat(e.progress().toFixed(2)),u=a.MathUtils.lerp(null!==o?1:1.5,null!==o?1.5:1,i);null===(r=n.current)||void 0===r||r.scale.set(u,n.current.scale.y,u)}}})}),[o,d]),(0,u.x)((function(){if(n.current&&(n.current.position.copy(ue.uMouse.value),t))if(t.distance>$){if(d||f(!0),t.distance>14){var e=a.MathUtils.mapLinear(t.distance,$,52,1.5,5);n.current.scale.set(e,e,e)}}else t.distance<=$&&d&&f(!1)})),(0,r.jsx)("object3D",{ref:n,children:(0,r.jsxs)("mesh",{"rotation-x":-Math.PI/2,renderOrder:2,children:[(0,r.jsx)("planeBufferGeometry",{args:[.25,.25]}),(0,r.jsx)("cursorMaterial",{"uniforms-tMap-value":d?s:i,transparent:!0,depthTest:!1,depthWrite:!1})]})})}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wt=function(e){return(2*e-1)*le},Ct=function(){var e=L((function(e){return e.setSelectedPoint})),t=L((function(e){return e.selectedPointPosition()})),n=(0,l.useRef)(!1),f=L((function(e){return e.selectedPoint})),x=L((function(e){return e.setHoveredPointId})),h=(0,l.useRef)(null),g=(0,l.useState)(null),b=g[0],w=g[1],C=(0,R.H)(),j=C.zoomLevel,S=C.setZoomLevel,P=k((function(e){return e.setEnableTrail})),M=(0,l.useRef)(),N=(0,xe.G)("md"),E=k((function(e){return e.setStartIntro})),T=A((function(e){return e.clearFilters})),F=bt(A((function(e){return[e.landId,e.kodaId]})),2),z=F[0],D=F[1],V=bt(p((function(e){return[e.metadata,e.setMetadata]})),2),B=V[0],_=V[1],Z=(0,l.useCallback)((function(t){(null===t||void 0===t?void 0:t.position)&&(S(1),e(t))}),[S,e]),W=(0,l.useCallback)((function(e){var t="string"===typeof e?Number.parseInt(e,10):e;return(0,m.isUndefined)(B)?null:(null===B||void 0===B?void 0:B.find((function(e){var n,r;return null!==(null===(n=e.metadata)||void 0===n?void 0:n.koda)&&(null===(r=e.metadata)||void 0===r?void 0:r.koda)===t})))||null}),[B]),G=function(e,t){var n="number"===typeof t?t.toString():t;return(e?e.find((function(e){return null!==e.index&&e.index.toString()===n})):void 0)||null};(0,l.useEffect)((function(){var e=window.location.search,t=new URLSearchParams(e).get("id"),r=(f||{}).index;"undefined"!==typeof r&&/^\d{1,5}$/g.test(r.toString())?t&&t.toString()===r.toString()||v().replace({query:{id:r.toString()}}).catch((function(e){console.error(e)})):t&&n.current&&v().replace({query:null}).catch((function(e){console.error(e)})),n.current=!0}),[f]),(0,l.useEffect)((function(){if((0,m.isNull)(B)){var e=new o.I;e.setDataType(a.FloatType),e.load("textures/finalFrame.exr",(function(e){for(var t=e.image,n=t.width,r=t.height,o=t.data,a=n*r,i=r-1,u=0,l=[],s=0;s<a;s+=1){var c=n*i+u;l.push({index:s,color:I[0],position:{x:wt(Number(o[4*c])),y:wt(Number(o[4*c+1])),z:wt(Number(o[4*c+2]))}}),(u+=1)>=n&&(u=0,i-=1)}l[-1]=O,_(l)}))}else{var t=window.location.search,n=new URLSearchParams(t).get("id");if(n){var r=G(B,n);if(r)return ue.uProgress.value=1,P(!1),void Z(r)}E(!0)}}),[Z,_,B,E,P]),(0,l.useEffect)((function(){return function(){ue.uProgress.value=0,e(null),x(null),S(0),T(),P(!0),E(!1)}}),[T,P,x,e,S,E]),(0,l.useEffect)((function(){if(null!=z){var e=G(B,z);e&&Z(e)}}),[z,Z,B]),(0,l.useEffect)((function(){if(D){var e=W(D);e&&Z(e)}}),[D,Z,W]);var Y=new a.Vector3,K=new a.Vector3;(0,l.useEffect)((function(){(0,u.m)((function(){if(M.current&&h.current){var e=M.current,t=e.target,n=e.pos,r=e.dist,o=h.current.getTarget(Y);o.x=Number(o.x.toFixed(2)),o.y=Number(o.y.toFixed(2)),o.z=Number(o.z.toFixed(2));var a=h.current.getPosition(K);a.x=Number(a.x.toFixed(2)),a.y=Number(a.y.toFixed(2)),a.z=Number(a.z.toFixed(2));var i=h.current.distance.toFixed(2);t&&t.textContent!==JSON.stringify(o)&&(t.textContent=JSON.stringify(o)),n&&n.textContent!==JSON.stringify(a)&&(n.textContent=JSON.stringify(a)),r&&r.textContent!==i&&(r.textContent=i)}}))}),[]);var $=(0,s.M4)({enableOrbitControls:!1}).enableOrbitControls;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"select-none overflow-hidden z-40 h-screen w-full pt-20 px-2 pb-2 md:px-8 md:pb-5",children:B?(0,r.jsxs)("div",{className:"relative w-full h-full ".concat(j>=1?"cursor-none":"cursor-auto"),children:[(0,r.jsxs)(i.Xz,{className:"rounded-md ".concat(j?"cursor-none":"cursor-auto"),shadows:!0,camera:{position:[0,50,60],fov:70},dpr:[1,2],onCreated:function(e){e.gl.setClearColor(new a.Color(H))},gl:{antialias:!0},children:[(0,r.jsxs)(l.Suspense,{fallback:null,children:[(0,r.jsx)(se,{camSource:b}),t&&(0,r.jsx)(je,{})]}),$?(0,r.jsx)(c.z,{}):(0,r.jsx)(ft,{ref:h,setCamSource:w}),j>=1&&(0,r.jsx)(l.Suspense,{fallback:null,children:!(0,U.b)()&&(0,r.jsx)(yt,{camSource:b})}),(0,r.jsx)("ambientLight",{intensity:5}),(0,r.jsx)(we,{camSource:b})]}),Te.TQ&&(0,r.jsx)(d.j,{}),(0,r.jsx)($e,{handleLocate:function(){var e=h.current;dt(e,t,N)}}),j>=1&&(0,r.jsx)(at,{})]}):(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,r.jsx)(y.Z,{})})}),(0,r.jsx)(s.Zf,{hidden:!Te.TQ})]})};Ct.displayName="Map";var jt=Ct},4225:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5893),o=n(1216),a=n(7294),i=n(4091),u=n(718);function l(e){var t=e.src,n=e.srcMobile,l=e.alt,s=e.width,c=e.height,d=e.className,f=void 0===d?"relative":d,v=e.ariaHidden,m=void 0!==v&&v,x=e.immediateRender,h=void 0!==x&&x,p=e.onImageAssetLoaded,y=(0,u.G)("md"),g=(0,a.useState)(!1),b=g[0],w=g[1];return(0,a.useEffect)((function(){b&&p&&p()}),[b,p]),(0,a.useEffect)((function(){h&&(0,o.Iq)()}),[h]),(0,r.jsx)(o.ZP,{className:f,children:(0,r.jsx)("img",{className:(0,i.classNames)("duration-500",b?"opacity-1":"opacity-0",f),alt:l,src:y?t:n||t,"aria-hidden":m,width:s,height:c,onLoad:function(){return w(!0)}})})}},4153:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var r=(0,n(6902).ZP)((function(e){return{zoomLevel:0,setZoomLevel:function(t){return e((function(){return{zoomLevel:t}}))}}}))},812:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var r=n(5893),o=n(9477),a=n(5228),i=n(7294),u=n(4153);function l(e){var t=e.count,n=e.radius,l=e.centerRadius,s=e.newVertShader,c=e.newFragShader,d=(0,i.useRef)(null),f=(0,i.useRef)(),v=(0,i.useRef)(null),m=(0,a.z)(o.TextureLoader,"textures/star.png"),x=(0,u.H)((function(e){return e.zoomLevel})),h=(0,i.useMemo)((function(){return{size:2.5,radius:n||60,centerRadius:l||8,branches:7,curve:.03,randomness:.7,randomnessPower:2.7,innerColor:"#dddcff",outerColor1:"#6d84fc",outerColor2:"#cd7cff"}}),[l,n]),p=(0,i.useMemo)((function(){for(var e=new o.Color(h.innerColor),n=new o.Color(h.outerColor1),r=new o.Color(h.outerColor2),a=[],i=[],u=0;u<t;u+=1){var l=3*u,s=4*u,c=Math.random()*h.radius+h.centerRadius,d=u%h.branches/h.branches*Math.PI*2,f=c*h.curve,v=Math.pow(Math.random(),h.randomnessPower)*(Math.random()<.5?1:-1)*h.randomness*c,m=Math.pow(Math.random(),h.randomnessPower)*(Math.random()<.5?1:-1)*h.randomness*c/2,x=Math.pow(Math.random(),h.randomnessPower)*(Math.random()<.5?1:-1)*h.randomness*c;a[l]=Math.cos(d+f)*c+v,a[l+1]=m,a[l+2]=Math.sin(d+f)*c+x;var p=e.clone();p.lerp(Math.random()>.5?n:r,c/h.radius),i[s+0]=p.r,i[s+1]=p.g,i[s+2]=p.b,i[s+3]=1}return[new Float32Array(a),new Float32Array(i),new Float32Array(Array.from({length:t},(function(){return 10*Math.random()})))]}),[t,h]),y=p[0],g=p[1],b=p[2];(0,a.x)((function(e,t){f.current&&(f.current.uniforms.uTime.value+=t)})),(0,i.useEffect)((function(){v.current&&(v.current.size=x?.65:2.5)}),[x]);var w=(0,i.useCallback)((function(e){var t=e.vertexShader;return t=(t="attribute float tOffset;\nvarying float tOff;\nuniform float uTime;\n".concat(t)).replace("#include <begin_vertex>",["tOff = tOffset;","float posX = length(vec2(position.x, position.z)) * cos(tOff + uTime * pow(tOff, 3.) * 0.00008);","float posZ = length(vec2(position.x, position.z)) * sin(tOff + uTime * pow(tOff, 3.) * 0.00008);","vec3 transformed = vec3( posX, position.y, posZ );"].join("\n"))}),[]),C=(0,i.useCallback)((function(e){var t=e.fragmentShader;return t=(t="uniform float uTime;\nvarying float tOff;\n".concat(t)).replace("vec4 diffuseColor = vec4( diffuse, opacity );","vec4 diffuseColor = vec4( diffuse, max(0.2, sin(uTime * 0.6 * tOff + tOff)) * 1.0 );")}),[]),j=(0,i.useCallback)((function(e){e.uniforms.uTime={value:1},e.fragmentShader=c?c(e):C(e),e.vertexShader=s?s(e):w(e),f.current=e}),[C,w,c,s]);return(0,r.jsxs)("points",{ref:d,renderOrder:-1,children:[(0,r.jsxs)("bufferGeometry",{attach:"geometry",children:[(0,r.jsx)("bufferAttribute",{attach:"attributes-position",args:[y,3]}),(0,r.jsx)("bufferAttribute",{attach:"attributes-tOffset",args:[b,1]}),(0,r.jsx)("bufferAttribute",{attach:"attributes-color",args:[g,4]})]}),(0,r.jsx)("pointsMaterial",{ref:v,attach:"material",transparent:!0,depthWrite:!1,depthTest:!1,size:h.size,sizeAttenuation:!0,vertexColors:!0,blending:o.AdditiveBlending,map:m,onBeforeCompile:j})]})}},8439:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r={Acid:"#702360",Mallow:"#894444",Sludge:"#486C33",Shadow:"#3d4957",Botanical:"#34615d",Mycelium:"#487154",Jungle:"#563455",Mystic:"#604877",Crystal:"#75426D",Spires:"#3d4739",Luster:"#806a2c",Biolume:"#3a5564",Molten:"#6c4213",Sulfuric:"#554e46",Obsidian:"#454081",Crimson:"#732726",Plague:"#424a1c",Thornwood:"#596265",Bog:"#603524",Ruins:"#6e4e21",Bone:"#624e2d",Splinter:"#64524d",Wastes:"#754c4c",Glacia:"#213182",Steppes:"#364163",Veldan:"#446342",Sands:"#1a6970",Sky:"#525275",Chaos:"#874932"}},6666:function(e,t,n){"use strict";n.d(t,{t:function(){return v}});var r=n(5893),o=n(7521),a=n(7294),i=n(4091),u=n(1089),l=n(4225),s=n(8439),c=n(3912),d=n.n(c),f=function(e){return e&&e in s.V?s.V[e]:""},v=function(e){var t=e.imageURL,n=void 0===t?"":t,s=e.environment,c=void 0===s?"":s,d=e.obeliskPieces,v=void 0===d?[]:d,x=e.className,h=(0,a.useState)(!1),p=h[0],y=h[1],g=c&&f(c);return(0,r.jsx)("div",{className:"relative w-full h-0 pt-[140%]",onClick:function(){return y(!p)},children:c&&n&&(0,r.jsxs)(o.Z,{glareEnable:!(0,u.b)(),tiltEnable:!(0,u.b)(),scale:1,glareMaxOpacity:.3,glareColor:g,perspective:2500,tiltMaxAngleY:10,tiltMaxAngleX:10,transitionSpeed:1e3,flipHorizontally:p,className:(0,i.classNames)("absolute inset-0 land-card-tilt-ready border-2",x),glarePosition:"all",style:{transformStyle:"preserve-3d",borderColor:"black"},children:[(0,r.jsx)("div",{className:"absolute inset-0",style:{backfaceVisibility:"hidden"},children:(0,r.jsx)(l.s,{className:"relative w-full h-full",src:"".concat(null!==n&&void 0!==n?n:"/assets/card-back.png"),alt:""})}),(0,r.jsx)("div",{className:"absolute inset-0",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:(0,r.jsx)(m,{pieces:v})})]})})};function m(e){var t=e.pieces,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=n.current;if(e){var r=Array.from(e.children),o=!0,a=!1,i=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value,c=s.dataset.id;c&&t.includes(c)&&(s.style.opacity="1")}}catch(d){a=!0,i=d}finally{try{o||null==l.return||l.return()}finally{if(a)throw i}}}})),(0,r.jsxs)("div",{ref:n,className:(0,i.classNames)(d()["obelisk-pieces"],"bg-gradient-to-tl from-black to-gray-dark-2 w-full h-full"),children:[(0,r.jsx)("div",{"data-id":"First Trip"}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})}},1827:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(7294),o=n(4059);function a(){var e=(0,r.useState)({windowW:0,windowH:0,windowCenter:{x:0,y:0},orientation:null}),t=e[0],n=e[1];return(0,o.O)("resize",(function(){n({windowW:window.innerWidth,windowH:window.innerHeight,windowCenter:{x:window.innerWidth/2,y:window.innerHeight/2},orientation:window.innerWidth>window.innerHeight?"landscape":"portrait"})}),{initial:!0}),t}},4:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var r=n(4051),o=n.n(r);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,o,a,i){try{var u=e[a](i),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,o)}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l="https://api.otherside.xyz",s=function(e){var t={sediment:{},environment:{},resources:[{},{},{},{}]},n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;switch(l.trait_type){case"Category":t.category=l.value;break;case"Sediment":t.sediment.value=l.value;break;case"Sediment Tier":t.sediment.tier=l.value;break;case"Environment":t.environment.value=l.value;break;case"Environment Tier":t.environment.tier=l.value;break;case"Northern Resource":t.resources[0].value=l.value;break;case"Northern Resource Tier":t.resources[0].tier=l.value;break;case"Eastern Resource":t.resources[1].value=l.value;break;case"Eastern Resource Tier":t.resources[1].tier=l.value;break;case"Southern Resource":t.resources[2].value=l.value;break;case"Southern Resource Tier":t.resources[2].tier=l.value;break;case"Western Resource":t.resources[3].value=l.value;break;case"Western Resource Tier":t.resources[3].tier=l.value;break;case"Artifact":t.artifact=l.value;break;case"Koda":t.koda=l.value;break;case"Obelisk Piece":t.obeliskPieces=Array.isArray(t.obeliskPieces)?u(t.obeliskPieces).concat([l.value]):[l.value]}}}catch(s){r=!0,o=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t},c=function(){var e,t=(e=o().mark((function e(t){var n,r,a,i,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=3;break;case 3:return e.next=5,fetch("".concat(l,"/lands/").concat(t));case 5:return n=e.sent,e.next=8,n.json();case 8:if(r=e.sent,a=r.attributes.find((function(e){return"Koda"===e.trait_type})),i=null,"number"!==typeof(null===a||void 0===a?void 0:a.value)){e.next=23;break}return e.next=14,fetch("".concat(l,"/kodas/").concat(null===a||void 0===a?void 0:a.value));case 14:if(404!==(u=e.sent).status){e.next=19;break}e.t0=null,e.next=22;break;case 19:return e.next=21,u.json();case 21:e.t0=e.sent;case 22:i=e.t0;case 23:return c={error:0,id:Number(t),imageURL:r.image,metadata:s(r.attributes),kodadata:i},e.abrupt("return",c);case 27:throw e.prev=27,e.t1=e.catch(0),new Error("Failed to fetch Otherdeed: ".concat(t));case 30:case"end":return e.stop()}}),e,null,[[0,27]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,l,"next",e)}function l(e){i(a,r,o,u,l,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}()},3912:function(e){e.exports={"obelisk-pieces":"obelisk-pieces_obelisk-pieces__bhrpV"}}}]);